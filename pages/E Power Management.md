---
layout: page
title: Flight
permalink: flight
---
## This path is work in progress!
The material that we provide in the following levels is by now means complete but it might help you to learn about the subject yourself, while we are working on providing content for you! 

## Level 1 - Voltaic Cell 
### Lecture
In the development process of a flight computer, a reliable and robust power supply is crucial for its success. The power supply must provide stable and sufficient power to all the components of the flight computer. We will learn how we can achieve this in the following levels.
At this level, we will learn about the element that powers our flight computer - the battery or voltaic cell. 

To understand its functioning, we will first define the terms oxidation and reduction and discuss the nobility of metals and the galvanic series. Subsequently, we will examine the example of the copper-zinc galvanic cell and explore the concepts of charging and discharging.

<iframe width="560" height="315" src="https://www.youtube.com/embed/7b34XYgADlM?si=mGbRgA8745nqifg0" title="YouTube video player" frameborder="0" allow="accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture; web-share" referrerpolicy="strict-origin-when-cross-origin" allowfullscreen></iframe>


A galvanic or voltaic cell uses a chemical reaction to create electricity. 
To do so, they use an oxidation-reduction reaction.

#### Oxidation and Reduction 
To understand the voltaic cell, we must first coin the terms oxidation and reduction. 
Oxidation is the process of giving up electrons, while reduction is the process of receiving electrons. 

One element can only give up electrons if another element takes those electrons up. Therefore, it's always an oxidation-reduction reaction or redox reaction. 

The anode is the place of oxidation, while the cathode is the place of reduction. 

#### Noble Metals and Galvanic Series
Noble metals are found in nature in their pure state, such as silver, platinum, and gold. They are resistant to corrosion, which is also a redox reaction, where the metal oxidizes (gives up electrons).

The nobler the metal, the less likely galvanic corrosion occurs, and the less likely the element will give up electrons. How noble a metal is is represented in the galvanic series. Magnesium, for example, is the least noble metal and occurs naturally only in combination with other elements. It has such a low nobility that it even reacts with oxygen to burn, which is also a form of redox reaction. 

#### Zinc and Copper Voltaic Cell
By looking at the galvanic series, we can determine that copper is nobler than zinc. Therefore, a zinc nail corrodes in a copper ion solution. 

In a voltaic cell, we separate the two metals into two half-elements. 
In one half-element, we have a piece of zinc in a zinc sulfate solution.
In the other half-element, we have a piece of copper in a copper sulfate solution. 
In a zinc sulfate solution, there are both zinc and sulfate ions. The zinc ions are twice positively charged, while the sulfate ions are twice negatively charged. The same is true for a copper sulfate solution. The charges cancel out and result in a neutral solution. 
Both zinc and copper ions are simply without two of their electrons, which means that they are twice positively charged ions. Ions can dissolve in water because of their polarity, which is why the zinc and the copper ions are in their aqueous state. 

Both half-elements alone would not react in any way. However, if we connect them through a wire, the nobler copper ions that lack two electrons in the sulfate solution want to pull electrons from the less noble zinc. One of the zinc elements gives up two electrons that move through the wire to the copper ions. Remember, moving electrons is what we call current. Therefore, we can use this electron flow to light up an LED by interposing an LED in the wire. 

Now, the zinc element is twice positively charged, which means it is a positive ion that dissolves in water. On the other hand, the twice positively charged copper is attracted to the copper metal, takes up the two electrons, and becomes a solid. Over time, the zinc electrode dissolves while the copper electrode enlarges. 

However, an imbalance would build up in the zinc sulfate and copper sulfate solutions. The zinc sulfate solution gains more zinc ions, which makes the solution net positively charged. On the contrary, the copper sulfate solution loses copper ions, which makes the solution net negatively charged. If enough charge builds up, the reaction can no longer occur, and the current will stop flowing again. To counteract this saturation, we connect the two half-elements by a membrane that only allows sulfate ions to pass through. If an imbalance occurs, the sulfate ions move from the copper sulfate to the zinc sulfate. Through that, the zinc sulfate gains negative charges, which makes it neutral again, while the copper sulfate also loses negative charges, which makes it neutral as well. The substrate that allows this balance to occur is called the electrolyte. In our case, zinc sulfate and copper sulfate are the electrolytes of this cell. 

In our case, the zinc is the anode, as it is the location of oxidation. It gives up electrons.
The copper is the cathode, as it is the location of reduction and as it takes up electrons. 

The electric potential energy difference (voltage) such a cell creates depends on the difference in the nobility of the two elements, which we can determine by the standard potential in the galvanic series. It is measured by using a concerned metal paired with a hydrogen electrode. 

Zinc would give up electrons when paired with hydrogen and, therefore, has a standard potential of -0.76V, while copper would receive electrons from hydrogen and has a standard potential of +0.35V. The total voltage a voltaic cell creates is the difference between the two standard potentials. So, in our case 1.11V.

#### Discharged and Recharging
This process continues until there are too few zinc atoms or copper ions remaining. The cell voltage will decrease with the number of elements that are converted. Eventually, the reaction will stop entirely. This point marks when the voltaic cell is fully discharged.

For rechargeable batteries, a voltage that is higher than the battery's voltage is applied from the outside to the two poles of the battery. In the case of the zinc/copper battery, this is not efficient, as the zinc might dissolve unevenly. However, if we were to take the example of this material combination, recharging would mean that the copper is pressured to give up electrons and that zinc is pressured to receive the electrons. Through that, the previous reaction is reversed. 

#### Summary
Every battery follows the principle of the voltaic cell. 
Inside such a cell, there are two metals of different nobilities. 
The less noble metal gives up electrons, while the nobler metal receives the electrons - this process is called a redox reaction. The less noble metal acts as the anode, where oxidation occurs, while the nobler metal acts as the cathode, where reduction takes place.

An easy-to-understand example is that of zinc and copper. 
Zinc is in the zinc sulfate solution, and copper is in a copper sulfate solution. The two half-cells are connected by a membrane. By connecting the two elements through a wire, the zinc elements give up two of their electrons, which makes the zinc twice positively charged and dissolve in water. The electrons move to the twice positively charged copper elements. These copper elements become solid and attach to the copper electrode. The charge difference in the solution is counteracted by a sulfate movement from the copper sulfate to the zinc sulfate. 

How much voltage a cell creates depends on the standard potential, which is given in the galvanic series. A zinc/copper cell creates around 1.11V. This voltage will reduce gradually until no electron movement is left. This is what we call a discharged battery.

A zinc/copper cell is usually not rechargeable. However, for rechargeable batteries, we connect a higher voltage to the two poles of the battery that pressure the materials to undo the previous reaction. 
## Level 2 - Battery Selection
### Lecture
Now that we understand the basic functioning of voltaic cells, we can discuss a few different battery types that are suitable for model rocketry. We will focus on the three most relevant ones:

1. Lithium-Ion (Li-Ion)
2. Lithium-Polymer (Li-Po)
3. Nickel-Metal Hydride (NiMH)

Once you've learned about these three types, we'll explore how to select the appropriate battery for your project. Following that, we'll delve into other essential properties to consider when choosing a battery, such as capacity, number of cells, C-rating, and battery connector.

#### Lithium-Ion (Li-ion)
Lithium Ion batteries use a liquid electrolyte that facilitates the movement of lithium ions between the anode and the cathode. Remember: the electrolyte in our zinc copper cell was the sulfate solution that neutralized the charges on both sides. 

The cathode in the Li-ion is typically lithium cobalt oxide, while the anode is often graphite. 
- Li-ion has a nominal cell voltage of around 3.6V, at which we should store it when not used. 
- A fully charged voltage of 4.2V, above which the battery suffers severe damage.
- And fully discharged voltage of 2.5-3V below which the battery again suffers permanent damage. 

Li-ion batteries have been used for a long time and are present in many consumer devices today, such as laptops, mobile phones, and cordless screwdrivers.

They come with the advantage of having a very high energy density. They can store a lot of energy in little volume and at a low weight. The low weight factor makes it a perfect option for model rocketry. Further, they can output very high currents.

On the contrary, Li-ion mostly come in a cylindrical form factor, which may be inconvenient to use in model rockets. Further, they are expensive and can be dangerous. We must handle them carefully, as a short circuit or a too-high current in the charging process may lead to them taking fire. 

#### Lithium Polymer (LiPo)
Lithium polymer batteries are very similar to lithium-ion batteries. However, they use a solid polymer electrolyte instead of a liquid electrolyte. The electrons consist of the same materials - lithium cobalt oxide and graphite. 

This results in the same nominal, fully charged, and fully discharged voltages of 3.6V, 4.2V, and 3V. 
They also come with the same benefit of having a high energy density, although the Li-ion battery's energy density is slightly higher. The advantage of the LiPo battery is that it comes in many form factors, which make it convenient to implement in model rockets. Further, they can output very high currents like Li-Ion batteries, which is why they are often used in drones or RC cars. The battery also comes with the same disadvantages, as being quite dangerous to use and expensive. 

#### Nickel-Metal Hydride (NiMH)
Nickel-metal hydride batteries use a potassium hydroxide electrolyte solution, a hydrogen-absorbing alloy for the anode, and nickel oxyhydroxide for the cathode. 

They have:
- a nominal voltage of: 1.2V
- a fully charged voltage of: 1.4V
- a fully discharged voltage of 1V
 
These batteries come with the advantage of being more robust and less likely to suffer catastrophic failures like LiPo or Li-ion. They can tolerate overcharging to a greater extent and are slightly less expensive. 

However, they have a lower energy density, meaning they are heavier and bulkier for the same amount of stored energy. Their current output is mostly not as high as the current output of the lithium alternatives but high enough to power the devices we use in model rockets. 

In model rocketry, they are good to use when robustness and safety are the highest priority. They are recommended for users who are less experienced with batteries, providing a safer and more forgiving option.

#### Type Selection
All three types of batteries are feasible to use in model rocketry, as they all have a relatively high energy density and sufficient current output. 

Li-Ions are the best regarding energy density but come at the disadvantage of their cylindrical form factor.

LiPo batteries are slightly worse in energy density but are available in all different forms. We used them for all of our flight computers up to this point. However, we must handle both Li-Ion and Li-Po batteries carefully. We, for example, once forgot to deactivate the charger, which caused the LiPo battery to inflate almost to the point of explosion. We were lucky that no severe damage was caused. 

A safer alternative would be the NiMH, which is more robust, can handle overcharges better, and is even cheaper. It comes at the disadvantage of lower, but still good energy density. They are highly recommendable for users who are less experienced with batteries, prioritizing safety and reliability in applications such as model rocketry.

#### Capacity
An integral characteristic of a battery is its energy rating, which tells us how much energy it can store. This rating is known as capacity and is measured in Ampere-hours (Ah).

A battery with a rated energy of 1 Ah has enough energy stored to provide 1 A of current for 1 h. If we discharge only 0.5A, a battery of only 0.5Ah could also supply our flight computer for one hour. 

$C=I*t$ ... Capacity in A*h

However, we should keep in mind that this is only a theoretical value. It gives us the absolute maximum energy that a battery can store. In reality, for example, we should never discharge more than 80% of the capacity of a Li-Ion, LiPo, or NiMH, as a deep discharge creates permanent damage. Further, it can lead to safety concerns on the lithium types and to long-term performance drops on all types. 

#### Number of Cells
LiPo and Li-Ion batteries have a nominal cell voltage of 3.7V, while NiMH batteries have a nominal voltage of 1.2V. 

Most flight computers will need a higher voltage to control servos and pyro channels effectively. A concept we haven't discussed yet is the arrangement of battery cells in parallel and series. If we put cells in parallel, their capacities add up, and the voltage remains the same. If we put the cells in series, the voltage of the cells adds up, and the capacity remains the same. 

Batteries often feature multiple cells inside to increase the capacity and voltage. How much the voltage of a battery is is given by the cell number. 
A three-celled LiPo battery, for example, consists of three LiPo cells put in series. The battery pack has a nominal voltage of 11.1V, a fully discharged voltage of 9V, and a fully charged voltage of 12.6V. By adjusting the number of cells or by changing battery types, we can acquire many different voltage ranges. 

#### C-Rating
Another vital characteristic of the used battery is its C Rating. It is the rating of the current the battery can be charged or discharged at. A rating of 1C would imply that a battery with a rated energy of 1Ah could be charged and discharged with 1A of current. The same C rating with a capacity of 0.5Ah could only be charged and discharged at 0.5A of current. In conclusion, this means that we can calculate the charge/discharge current through the C rating and the rated energy of the battery by using the following formula:

$ùêº=ùê∂_ùëü‚àóùê∏_ùëü$

ùêº ‚Ä¶ Current of charge or discharge A
ùê∂ùëü ‚Ä¶ C Rating 1/h
ùê∏ùëü ‚Ä¶ Rated Energy Ah

The C-rating is another factor that we can select when buying a battery. 

#### Connector
All battery connectors are polarized to ensure correct polarity during connection. This polarity alignment adds a layer of reverse polarity protection.

The three most common battery connectors are the
- T-Plug
- EC3
- and the XT60, or XT30 plugs

The T-Plug is the most compact of the three. It can withstand a lot of current, although the other two plug types can withstand even more. 

The EC3 and XT plugs have a more spacious form factor, which leads to a more secure attachment and a higher current handling capability. The XT plugs are available in different sizes, while the larger XT60 is used most often and comes even in a horizontal configuration. 

Most importantly, there are female and male connectors of all three plug types, while the battery most often features the female connector. So, when designing our board, we must use male connectors of the correct type to fit our battery. 

#### Summary
When selecting the battery, we must first choose the battery type.
Three types are best suited for model rocketry:
Li-Ion, Li-Po, and NiMH. 
Li-Ion and Li-Po have a nominal voltage of around 3.6V, have high energy density, and have high current discharge capabilities, but are dangerous if not used correctly. 
NiMH, on the other hand, have a voltage of around 1.2V, a moderate energy density, moderate current output capabilities, and are more robust, which makes them easier to use. 

The capacity of a battery states how much energy it can store and is given in Ampere times hours. In reality, we can only use around 80% of the capacity, as we would otherwise deep-discharge the battery. 

The next factor when selecting the battery is the cell number. A cell number of two means that two cells are put in series, which doubles the voltage and maintains the capacity. So, by selecting the cell number, we can choose the voltage range at which our battery operates. 

Then, there is the C-rating, which states how much charge-discharge current a battery can handle at its capacity. 

And finally, there are different battery connectors, such as the T-plug, EC3, and the XT plugs. Batteries most often feature the female plug, while we have to incorporate the male plug on our boards. 

## Level 3 - Voltage Regulation 
### Lecture 
We primarily base our power supply on batteries. It's important to note that a battery's voltage varies across its charging state; for example, a LiPo battery's voltage ranges from 12.6V when fully charged to 9V when discharged. Additionally, many integrated circuits require a specific voltage, such as 3.3V, and other components, like servos, are uniformly controllable using 5V.

The job of a voltage regulator is to provide these exact voltages. They convert an input voltage to a lower output voltage, or they can even perform the inverse. We mainly categorize voltage regulators into linear regulators (LDOs) and switching regulators. However, an even simpler form exists known as the "Shunt Regulator."

At this level, we will look at all three voltage regulator versions. But before we do so, we will learn more about the Zener diode to discuss the shunt regulator. 

#### Zener Diode 
To understand the simplest form of a voltage regulator, we must first recall the functional principle of a diode. A diode allows current to flow in one direction if a forward voltage, typically around 0.7V for a silicon diode, is applied. This forward voltage overcomes the depletion region. In the reverse direction, the diode typically blocks current flow as the reverse voltage enlarges the depletion region of the diode.

However, we haven't yet discussed a particular property of all diodes known as the breakdown voltage. While it's generally true that no current flows in reverse bias, this isn't entirely correct. Every diode can become conductive in its reverse direction if the applied reverse voltage exceeds a certain threshold, called the breakdown voltage. For standard diodes, the breakdown voltage is quite high, and reaching it causes immense currents to flow, which can permanently damage the diode.

There is, however, an extraordinary type of diode known as the Zener diode, which is designed to have a low and well-defined breakdown voltage, called the Zener voltage. When the Zener diode reaches this voltage in reverse bias, it becomes conductive without being permanently damaged. This unique property allows Zener diodes to be used effectively in voltage regulation applications.

#### Shunt Regulator 
We can use the Zener diode to create the simplest form of voltage regulators - the Shunt Regulator. If we put a Zener diode with a Zener voltage of 5V in reverse bias in series to a voltage source of 12.6V, we would get an almost infinite current, as the voltage drop across the Zener diode remains constant at 5V and the resistance across the wire would have to dissipate the remaining 7.6V. 

To form a shunt regulator, we add a current limiting resistor in front of the Zener diode. Further, we attach the load in parallel to the Zener diode. Let's assume we have a 100 Ohm series resistor and a 500 Ohm load. We know that the Zener diode clamps the voltage to 5V. Therefore, the voltage drop across the load is also 5V. We can determine the flowing current over the resistor to be 10mA. Then we also know the voltage drop across the current limiting resistor to be 7.6V. Consequently, the maximum current this regulator can provide is 76mA. The difference in current the 76-10mA = 66mA must flow over the Zener diode.

If the load resistance changes to 100 Ohm, the flowing current would become 50mA, which would mean that only 26mA would flow through the diode. 

When the load resistance is reduced to 50 Ohms, the load draws 100mA, which is more than the current available from the current limiting resistor (76mA). This results in the Zener diode being unable to maintain its Zener voltage of 5V, causing the voltage across the load to drop below 5V.

The disadvantages of this regulator become apparent:
- The resistor must be selected properly. It must be large enough to limit the current flow to prevent burning out the Zener diode. Further, it must be small enough to provide sufficient current to the load. If the current draw of the load is too high, the Zener diode can no longer maintain the regulated voltage. 
- The remaining current that the load does not use is translated into heat over the Zener diode. Further, the excessive voltage is also discarded as heat over the current limiting resistor. Both aspects make this regulator type highly inefficient. 

Consequently, the shunt regulator is best suited for applications with steady current flows. Too high currents could cause the regulator to provide insufficient voltage, while too small load currents would make the regulator highly inefficient.

#### Linear Regulator
A more advanced form of a voltage regulator is the linear regulator. 
There are different forms of this regulator. In its simplest form, it regulates the voltage by controlling the resistance of a transistor based on the input voltage and the current draw. 

It uses an NPN  bipolar junction transistor (BJT) in its rudimentary form. Its collector is connected to the input voltage, and its emitter is attached to the output voltage. At the base, we have a Zener diode connected to the input side by a series resistor. This diode again creates a stable reference voltage at the base of the BJT. The voltage drop from the base to the emitter is constant at around 0.7V. Therefore, the output voltage is the Zener voltage minus the voltage drop across the base-emitter. 

This voltage regulator design is beneficial, as the current does not have to flow over the series resistor but instead can flow through the transistor to the load. Through that, it is more efficient, as we are not losing as much energy through heat. For the transistor to limit the current flow, it operates in the active region, where the resistance across the emitter-collector varies with the current flowing through the base into the emitter. 

Most linear regulators require the input voltage to be higher than the output voltage. The input voltage has to be at least higher than the output voltage by the dropout voltage. 
An extraordinary form of a linear regulator is the low dropout voltage regulator, the so-called LDO.

A standard series of LDOs is the 78XX series. 
Such an LDO integrates a circuit like this into a single component and only requires two external capacitors. 
A component that houses many elements inside is called an integrated circuit. 

These kinds of regulators take things further than the example we discussed. 
- They incorporate thermal protection. 
- A voltage reference accurate over an enormous input voltage and output current range. 
- They achieve very stable outputs.
- And as mentioned earlier, have a low dropout voltage. 

They can be bought in various forms, while the last two letters suggest the output voltage.
A 7805, for example, would create an output voltage of 5Vs. 
There are also other forms that can create adjustable output voltage based on a resistor divider that fed into the LDO. 

Linear regulators are commonly favored for their affordability, simplicity, and reliability, making them popular for many applications. However, in scenarios requiring high currents and optimal efficiency, a superior alternative emerges the switching regulator.

#### Switching Regulator
The switching regulator also steps down the voltage. However, it also increases the current. Therefore, the output power is approximately equal to the input power. The converter achieves this internally by a circuit featuring a transistor, capacitors, an inductor, and a diode. The transistor switches the input on and off repetitively. The on-duration increases or decreases according to the current needed on the converter output. 

A capacitor smoothens the voltage, while an inductor smoothens the current. The switch converter has a way higher power efficiency than a linear voltage regulator, often going above 90 percent.

Switching Regulators are divided into three sub-categories:
Buck converters, Boost converters, and Buck-Boost converters. 

- A Buck converter is a switching regulator that steps down the voltage and increases the current. So, it converts a high input voltage to a lower output voltage, like the one I described previously. 
- The Boost converter is the opposite. It steps up the voltage while reducing the current. Consequently, it can convert a lower input voltage to a higher output voltage. 
- The final form is a Buck-Boost converter, an adjustable voltage regulator that can do both. 

There are many switching regulators from numerous manufacturers. All of them come with different advantages and disadvantages. 

Before we continue to design and incorporate our first switching regulator into our power management circuit, let's first examine the IC that we will be using: the LM2596S-5.0 Buck Converter. Let's delve into a few major characteristics that are important when selecting a switching regulator, such as the passive component requirements, the switching frequency, the term ESR, and RMS. By the way, the 5.0 at the end of the name represents the fixed voltage that the regulator outputs.

##### Passive Components
As with most switching regulator ICs, the LM2596S includes all active components needed to create a buck converter. However, we have to provide the passive components on the outside, as they are too large to be incorporated into the IC. These components are capacitors on the input and output, an inductor, and a diode. 

##### Switching Frequency
If we look at its datasheet, we find something that is called the switching frequency. It determines the speed at which the transistor switches the input voltage. It is 150kHz, which is faster than the 52kHz of the LM2576 (another switching regulator). The faster the switching frequency, the smaller the passive components can be. Remember that the inductor wants to maintain a steady current while the capacitor aims to maintain a persistent voltage. Those resistances to change are time-dependent, which means that if the time is very short, even smaller components can achieve the smoothing. 

##### ESR
When selecting the capacitors for the switching regulator, we must look at the capacitor's ESR (equivalent series resistance). In an ideal world, capacitors have no resistance, which means an infinite current could flow when connecting a fully discharged capacitor to a voltage source. However, in reality, every component has a series resistance, which we call the ESR.

If you recall the three main capacitor types, they feature very different typical resistance values: 
- MLCCs: <0.015Œ©
- Aluminum Electrolytic Capacitors: 1 - 30Œ©
- Tantalum Capacitors: 1 - 3Œ©

##### RMS
Further, there is the RMS (root mean square) current rating. The RMS current is the current that flows through the ESR (equal series resistance) of a capacitor, causing a temperature rise of +10¬∞C. It indicates the maximum continuous current that the capacitor can handle without exceeding its temperature limits. It's crucial to ensure that the capacitor can withstand the current demands of the application without overheating. We should select capacitors with RMS current ratings that exceed the expected current levels to ensure reliability and longevity.

#### Summary
So, there are many ways in which we can convert an input voltage. 

The easiest way would be by a Zener diode and a resistor, which we call a Shunt Regulator. Conversely, this regulator type can only be used in continuous current applications with low currents, as the current always has to flow over the series resistor, which dissipates the excess voltage as heat. Further, this process is utterly inefficient. 

Another way would be by using a linear regulator. A linear regulator uses a transistor in its active region to restrict current flow. Here, larger currents can flow as the current doesn't have to flow over a series resistor. Further, the linear regulator can conveniently manage a variable current flow by changing the resistance of the transistor. However, the resistance the transistor provides leads to energy loss through heat. This heat dissipation limits this type of regulator to a current supply of several amps and to moderate efficiencies.

Finally, there are switching regulators, which not only change the voltage but also the current. Through that, the net power the regulator delivers remains constant. The switching regulator achieves this by switching the input power supply and, subsequently, smoothing the signal with a capacitor and an inductor to provide a stable output voltage. There are three types of switching regulators: Buck converters, which step down voltage; Boost converters, which step up voltage; and Buck-Boost converters, which can do both. 

When designing a switching regulator circuit, we provide the passive components as they do not fit into an IC. When selecting the capacitors, we have to watch out for their ESR, their RMS ratings, and the voltages they can withstand. For the inductor and diode, we have to consider their allowed currents. 

## Level 4 - Regulator Circuit Design
### Lecture
As previously mentioned, we are now ready to incorporate our first switching regulator IC. For this, we will use the LM2596S-5.

We will set up a voltage regulation circuit to convert a 3-cell LiPo battery, which has a voltage range of 9V to 12.6V, down to 5V. To achieve this, we follow the "Application and Implementation" guide in the Texas Instruments LM2596 datasheet.

The first thing we look up in the datasheet is the typical application diagram that we can find on page 23. As we can see, the external components we will need are: an input capacitor, an output capacitor, an inductor, and a diode. 

We can see that the regulator has a total of five pins. 
We connect the GND pin to GND. For the LM2596 to be active later on, we have to connect the ON/OFF pin to GND. We attach our battery voltage to the input pin of the Buck converter. We add the input capacitor, which shall provide the switching regulator with instantaneous current each time it switches on. Then, we connect the output pin to our 5V line, add a second capacitor for smoothening the output voltage, and an inductor for filtering the output current. Further, we implement a diode before the inductor. Now, the inductor's current has a path to flow during the off-phase of the switching regulator. Finally, we connect the feedback pin to the output voltage. Through this pin, the regulator is able to improve the stability of the output voltage. 

Now, that we have placed all the components, we have to select the component's properties to be suitable for the regulator design. 
#### Input Capacitor
Let's begin with the input capacitor. The input capacitor provides the LM2596 with instantaneous current each time the transistor switches on. When selecting the input capacitor, we must consider its RMS (root mean square) and voltage rating.

According to the LM2596 datasheet, the RMS rating of the input capacitor should be at least half of the DC load current, which is 3A in our case. Therefore, the minimum RMS current rating for the input capacitor should be 1.5A. 

The input voltage rating should be 1.5 times higher than the maximum supply voltage for an aluminum electrolytic capacitor. In our case, the maximum supply voltage is 12.6V, so the capacitor should have a voltage rating of at least 18.9V. The voltage rating of a capacitor gives the maximum voltage we can apply to the capacitor without it suffering damage. 

So, our capacitor should have a RMS current of at least 1.5A, should withstand a voltage of at least 18.9V, and should have a capacitance of 680 uF according to the datasheet. 
#### Output Capacitor
Now, we move on to the output capacitor selection selection. The output capacitor serves two purposes: filtering the output voltage and maintaining stability in the regulator loop. Its most critical design factor is its Equivalent Series Resistance (ESR). This parameter should be as low as possible to minimize output ripple. However, it is crucial to strike a balance, ensuring that the ESR isn't too low, which could potentially destabilize the feedback loop.

In switching regulator circuits, the output ripple typically stems from the regulators' switching action and is a slight periodic change in the output voltage. 

For this application, considering the expected operating temperatures of the flight computer above -25¬∞C, an electrolytic capacitor is suitable. However, if temperatures are anticipated to drop below -25¬∞C, the LM2596 datasheet recommends using tantalum capacitors due to their superior characteristics at lower temperatures.

An ESR value of the aluminum electrolytic capacitor is related to the capacitance value and its voltage rating. In most cases, higher voltage electrolytic capacitors have lower ESR values. Often, capacitors with much higher voltage ratings can be required to provide the low ESR values required for low output ripple voltage.

For now we will take a capacitor with an ESR of 94mOhm. We will see whether or not this is sufficient after we have selected the inductor. As indicated in the datasheet, the capacitance value should be 220uF. Further, the capacitor should at least withstand the output voltage of 5V. The one that we selected withstands a voltage of 16V.  
#### Inductor
As a third step, we are going to select the inductor. The TI implementation guide provides us with an inductor selection diagram for the LM2596-5.0. Here, we have the maximum load current on the X-axis and the maximum input voltage on the Y-axis. As we expect a maximum input voltage of 12.6V and want to pull the 3A maximum load current, we use an L40 inductor. TI provides us with a table below the graph with recommendations and inductor values. The L40 stands for an inductor of 33ŒºH with a maximum current rating of 3.5A. 

It also is stated that it is vital to look out for proper core material for the inductor, as cheap core materials can cause EMI (electromagnetic interference) in nearby PCB traces. 

In a buck converter like the LM2596-5.0, during each switching cycle:
When the switch is closed, current flows through the inductor, storing energy in its magnetic field. This causes the current through the inductor to rise.

When the switch opens, the energy stored in the inductor's magnetic field causes the current to continue flowing, albeit now through the load and the diode. This causes the current through the inductor to decrease.

The difference between the peak and valley of this current waveform is known as the inductor ripple current. It represents the alternating current flow through the inductor due to the switching action of the regulator.

![](/assets/images/Pasted%20image%2020240526110222.png)
Through another diagram in the datasheet, we can evaluate the approximate inductor ripple current, which is 900mA at full load. 

This current allows us to calculate the change in voltage across the capacitor, which is the ripple voltage.

$Œîùëà_{ùëÇùëàùëá }= Œîùêº_{ùêºùëÅùê∑} ‚àó ùê∏ùëÜùëÖ_{ùê∂ùëúùë¢ùë°}$
$Œîùëà_{ùëÇùëàùëá}$ ‚Ä¶ Output ripple voltage [V]
$Œîùêº_{ùêºùëÅùê∑}$ ‚Ä¶ Inductor ripple current [A]
$ùê∏ùëÜùëÖ_{ùê∂ùëúùë¢ùë°}$ ‚Ä¶ Equal serial resistance of the output capacitor [Œ©]

This results in an voltage ripple of 84.6mV. An 84.6mV output voltage ripple is a relatively small value. Whether this ripple is sufficiently small depends on the sensitivity of the components we intend to power. For example, a 3.3V regulator and a servo motor typically have tolerances that can accommodate such a small ripple without significant impact on their operation.

#### Diode
The fourth component we need to select is the catch diode. This diode is essential in the switching regulator circuit to provide a path for current when the internal switch of the regulator turns off. During the regulator's switching cycle, when the switch is closed, current flows through the inductor, storing energy in its magnetic field. When the switch opens, the energy stored in the inductor needs a path to discharge safely. 

The catch diode ensures continuity of current flow by allowing this energy to flow back to the load circuit. 

The catch diode must respond quickly to the switching cycles of the regulator to maintain efficiency and stability. Ideally, the diode should have minimal voltage drop to minimize power loss and improve efficiency. Remember, the Schottky diode has a low voltage drop. Therefore, it will be the preferred choice here. The last parameter of the diode that we have to select is that it should be able to handle the maximum current of 3A.

#### On/Off Functionality
Another beneficial feature of this voltage regulator is that it features a designated on/off pin. Normally, we would interpose a switch on one of the connections to the battery. This switch must withstand a current as high as 20A, as the entire current of the PCB runs through the switch. 
However, we can spare this heavy and expensive switch by using the on/off pin of the regulator. Instead of disconnecting the battery from the flight computer, we can turn off the regulator by attaching a switch to the switching regulator. 

Additionally, a red LED is added to visualize the power state of the 5V line. This results in the final schematic for the 5V power regulation.

#### Summary
So, when designing a voltage regulation circuit, the first step is to select an appropriate regulator IC. Important characteristics of the IC selection are the output voltage, the input voltage range, the switching frequency, and the maximum output current. 

After we have selected the appropriate IC, it is crucial to follow the implementation guide, which we can find in the IC's datasheet. 

In most cases, we must select the input and output capacitors, the inductor, and the diode. 
When choosing the input capacitor, the RMS and the maximum voltage rating are most important. 
When determining the the output capacitor, the ESR is the most essential characteristic and must strike a perfect balance. It shouldn't be too high or too low. 
When selecting the inductor, we must pay attention to its inductance, current handling capabilities, and core material to prevent EMI. 
And finally, for the diode, we will most often choose a Schottky diode. The diode must be able to withstand enough current. 

### Examples
Zener Diode
Shunt Regulator 
L7805
LM2596